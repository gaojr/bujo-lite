{
    "scopeName": "markdown.bujo",
    "injectionSelector": "L:text.html.markdown",
    "patterns": [
        { "include": "#bujo-note" },
        { "include": "#bujo-event" },
        { "include": "#bujo-task" },
        { "include": "#bujo-task-migrate-forward" },
        { "include": "#bujo-task-migrate-backward" },
        { "include": "#bujo-task-done" },
        { "include": "#bujo-grid" }
    ],
    "repository": {
        "bujo-note": {
            "match": "((?<=\\-)\\]|\\[(?=\\-]))|((?<=\\[)\\-(?=\\]))|((?<=\\[\\-\\]\\s)!(?=\\s))|((?<=\\[\\-\\]\\s)\\?(?=\\s))|((?<=\\[\\-\\]\\s)[^!?*\\s\\|].*)|((?<=\\[\\-\\]\\s!\\s).*)|((?<=\\[\\-\\]\\s\\?\\s).*)",
            "captures": {
                "1": { "name" : "bujo.note.notation" },
                "2": { "name" : "bujo.note.symbol" },
                "3": { "name" : "bujo.note.modifier.exclamation" },
                "4": { "name" : "bujo.note.modifier.question" },
                "5": { "name" : "bujo.note.text" },
                "6": { "name" : "bujo.note.text.modifier.exclamation" },
                "7": { "name" : "bujo.note.text.modifier.question" }
            }
        },

        "bujo-event": {
            "match": "((?<=o)\\]|\\[(?=o]))|((?<=\\[)o(?=\\]))|((?<=\\[o\\]\\s)!(?=\\s))|((?<=\\[o\\]\\s)\\?(?=\\s))|((?<=\\[o\\]\\s)[^!?*\\s\\|].*)|((?<=\\[o\\]\\s!\\s).*)|((?<=\\[o\\]\\s\\?\\s).*)",
            "captures": {
                "1": { "name" : "bujo.event.notation" },
                "2": { "name" : "bujo.event.symbol" },
                "3": { "name" : "bujo.event.modifier.exclamation" },
                "4": { "name" : "bujo.event.modifier.question" },
                "5": { "name" : "bujo.event.text" },
                "6": { "name" : "bujo.event.text.modifier.exclamation" },
                "7": { "name" : "bujo.event.text.modifier.question" }
            }
        },

        "bujo-task": {
            "match": "((?<=\\s)\\]|\\[(?=\\s]))|((?<=\\[)\\s(?=\\]))|((?<=\\[\\s\\]\\s)!(?=\\s))|((?<=\\[\\s\\]\\s)\\?(?=\\s))|((?<=\\[\\s\\]\\s)[^!?*\\s\\|].*)|((?<=\\[\\s\\]\\s!\\s).*)|((?<=\\[\\s\\]\\s\\?\\s).*)",
            "captures": {
                "1": { "name" : "bujo.task.notation" },
                "2": { "name" : "bujo.task.symbol" },
                "3": { "name" : "bujo.task.modifier.exclamation" },
                "4": { "name" : "bujo.task.modifier.question" },
                "5": { "name" : "bujo.task.text" },
                "6": { "name" : "bujo.task.text.modifier.exclamation" },
                "7": { "name" : "bujo.task.text.modifier.question" }
            }
        },

        "bujo-task-migrate-forward": {
            "match": "((?<=>)\\]|\\[(?=>]))|((?<=\\[)>(?=\\]))|((?<=\\[>\\]\\s)!(?=\\s))|((?<=\\[>\\]\\s)\\?(?=\\s))|((?<=\\[>\\]\\s)[^!?*\\s\\|].*)|((?<=\\[>\\]\\s!\\s).*)|((?<=\\[>\\]\\s\\?\\s).*)",
            "captures": {
                "1": { "name" : "bujo.task.migrate.forward.notation" },
                "2": { "name" : "bujo.task.migrate.forward.symbol" },
                "3": { "name" : "bujo.task.migrate.forward.modifier.exclamation" },
                "4": { "name" : "bujo.task.migrate.forward.modifier.question" },
                "5": { "name" : "bujo.task.migrate.forward.text" },
                "6": { "name" : "bujo.task.migrate.forward.text.modifier.exclamation" },
                "7": { "name" : "bujo.task.migrate.forward.text.modifier.question" }
            }
        },

        "bujo-task-migrate-backward": {
            "match": "((?<=<)\\]|\\[(?=<]))|((?<=\\[)<(?=\\]))|((?<=\\[<\\]\\s)!(?=\\s))|((?<=\\[<\\]\\s)\\?(?=\\s))|((?<=\\[<\\]\\s)[^!?*\\s\\|].*)|((?<=\\[<\\]\\s!\\s).*)|((?<=\\[<\\]\\s\\?\\s).*)",
            "captures": {
                "1": { "name" : "bujo.task.migrate.backward.notation" },
                "2": { "name" : "bujo.task.migrate.backward.symbol" },
                "3": { "name" : "bujo.task.migrate.backward.modifier.exclamation" },
                "4": { "name" : "bujo.task.migrate.backward.modifier.question" },
                "5": { "name" : "bujo.task.migrate.backward.text" },
                "6": { "name" : "bujo.task.migrate.backward.text.modifier.exclamation" },
                "7": { "name" : "bujo.task.migrate.backward.text.modifier.question" }
            }
        },

        "bujo-task-done": {
            "match": "((?<=x)\\]|\\[(?=x]))|((?<=\\[)x(?=\\]))|((?<=\\[x\\]\\s)!(?=\\s))|((?<=\\[x\\]\\s)\\?(?=\\s))|((?<=\\[x\\]\\s)[^!?*\\s\\|].*)|((?<=\\[x\\]\\s!\\s).*)|((?<=\\[x\\]\\s\\?\\s).*)",
            "captures": {
                "1": { "name" : "bujo.task.done.notation" },
                "2": { "name" : "bujo.task.done.symbol" },
                "3": { "name" : "bujo.task.done.modifier.exclamation" },
                "4": { "name" : "bujo.task.done.modifier.question" },
                "5": { "name" : "bujo.task.done.text" },
                "6": { "name" : "bujo.task.done.text.modifier.exclamation" },
                "7": { "name" : "bujo.task.done.text.modifier.question" }
            }
        },

        "bujo-grid": {
            "match": "((?<=-|\\|)-)|(\\|(?=-|\\s))",
            "captures": {
                "1": { "name" : "bujo.horizontal.grid" },
                "2": { "name" : "bujo.vertical.grid" }
            }
        }
    }
}
